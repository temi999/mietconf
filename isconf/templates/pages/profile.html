{% extends 'base/base.html' %}
{% load static %}
{% block title %} {{ user.username }} - Профиль{% endblock %}
{% block css %}
    <link rel="stylesheet" href="{% static 'css/profile.css' %}">
{% endblock %}

{% block content %}
    <div class="container">
        <div class="user_info">
            <div class="title">
                <h1>{{ user.userprofile.profile_name }}</h1>
                <p class="status">{{ user_status_text }}</p>
            </div>
            {% if show_request %}
            <div class="section">
                <h2 class="section_name">Заявка на статус автора:</h2>
                {% if is_request_exist %}
                <p class="request">Рассматривается</p>
                {% elif user.userprofile.is_profile_set %}
                    <p class="request"><a href="{% url 'become_author' %}">Подать заявку</a></p>
                {% else %}
                    <p style="color: #ff6056; font-weight: bold;">Пожалуйста, заполните все данные профиля, чтобы подать заявку!</p>
                {% endif %}
            </div>
            {% endif %}

            {% if user.userprofile.is_author %}
                <div class="section">
                    {% if is_material_sent %}
                        <h2>Ваш материал проверяется. Статус:</h2>
                        <p class="request">{{ material_status }}</p>
                    {% else %}
                    <h2 class="section_name">Не забудьте прислать материал!</h2>
                    <p class="request"><a href="{% url 'send_material' %}">Отправить</a></p>
                    {% endif %}
                </div>
            {% endif %}
            <div class="section">
                <h2 class="section_name">Данные профиля:</h2>
                <form method="POST" action="{% url 'profile' %}">
                {%  csrf_token %}

                <p>Имя:</p>
                {{ user_form.first_name }}
                <p>Фамилия:</p>
                {{ user_form.last_name }}
                <p>E-Mail:</p>
                {{ user_form.email }}
                <p>Местоположение:</p>
                {{ userprofile_form.location }}
                <p>Дата рождения:</p>
                {{ userprofile_form.birth_date }}

                <p><input type="submit" value="Сохранить"></p>
                </form>
            </div>
        </div>
    </div>
{% endblock %}